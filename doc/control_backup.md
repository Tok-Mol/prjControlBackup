# Приложение Система контроля хранения резервных копий (Control Backup)

**название**: _**Control Backup**_.

**дата**: _20.05.2022_

**версия**: _01.00.00_

---

## 1. Общая Задача

### 1.1. Исходные данные 

+ Cуществует `Система каталогов` формата:

```text
[root]
    +- [server1]                      <--------- Первый уровень
    |   +- [YYYY]                       <------+ 
    |       +- [MM]                            | Второй уровень
    |           +- [DD]                 <------+
    |               +- [File1.zip]          <--+
    |               |   ...                    | Третий уровень
    |               +- [FileN.zip]          <--+     
    +- [serverN]
        +- [YYYY]
            +- [MM]
                +- [DD]
                    +- [File1.zip]
                    |   ...
                    +- [FileN.zip]
```

+ На Первом уровне вложения находятся имена серверов `[serverN]`, где происходит сохранение файлов-архивов. Например: `ServerApp`, `ServerDb`, и т.д.;
+ На Втором уровне формируется иерархия папок из даты создания  файла-архива, включает последовательно папки: `ГОД`, `МЕСЯЦ`, `ДЕНЬ`. Синтаксис: `[YYYY]\[MM]\[DD]`, например: `2021\12\22`, `2021\12\23` и т.д.;
+ На Третьем уровне хранятся файлы-архивы с выбранного Сервера `[serverN]` в указанную дату `[YYYY]\[MM]\[DD]`. Например: `ServerApp\2021\12\23\file1.7z`;
+ Названия серверов на Первом уровне определенны и известны, но должна существовать возможность добавить или исключить из обработки один или несколько серверов;
+ Имена файлов-архивов на Третьем уровне определенны и известны, но должна существовать возможность добавить или исключить из обработки один или несколько имен файлов;
+ В `Систему каталогов` с неизвестной периодичностью, не контролируемой службой сохраняются файлы-архивы по необходимости формируя дополнительные каталоги всех уровней;
+ В процессе сохранения файлов-архивов возможны `Логические ошибки`:
  + не учтённый сервер на Первом уровне;
  + не учтённый файл-архив на Третьем уровне;
  + ошибка в формировании даты на Втором уровне;
  + сохранение любых файлов в любом месте в `Системе каталогов`;
  + создание каталогов на Втором уровне не отвечающих формату.

### 1.2. Необходимая функциональность

+ Контролировать создание `Системы каталогов`;
+ Фиксировать `Логические ошибки`;
+ Вести `Журнал регистрации` новых файлов-архивов;
+ Создавать `Ежедневный отчет` по состоянию `Системы каталогов` и файлов-архивов;
+ Хранить настройки программы в конфигурационном файле.

## 2. Описание функциональности версий

### 2.1. Версия 1.00

+ Настройки программы храним в конфигурационном файле `cfg_setting.py` в виде переменных;
+ Сканирование `Системы каталогов`, сортируя результат в списки `Работа` (для дальнейшей работы) и `Ошибки` (фиксации `Логических ошибок` в `Системе каталогов`).
+ Определять для каждого найденного файла:
  + имя, расширение;
  + размер;
  + дату создания;
+ Сохранять результаты поиска в файл-отчет.

### 2.2. Версия 1.01

+ Сохранять результаты поиска в файл-отчет сортировкой:
  + сервер-дата-файл(имя, дата создания, размер);
  + дата-сервер-файл(имя, дата создания, размер).

### 2.3. Версия 1.02

Сохранять сканирования в связанные html файлы.
